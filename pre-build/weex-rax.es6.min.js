(this.nativeLog||function(e){console.log(e)})("Weex JS Framework 0.24.0, Build 2018-01-05 18:17. (Rax: 0.4.20)"),this.getJSFMVersion=function(){return"0.24.0"};var e=this;e.setTimeout;t=function(){"use strict";var t={framework:"0.24.0",transformer:">=0.1.5 <0.5"};let n=1;function r(){return(n++).toString()}function o(e){const t=Object.prototype.toString.call(e);return t.substring(8,t.length-1)}function s(e){if("function"!=typeof btoa)return"";const t=Array.prototype.map.call(new Uint8Array(e),e=>String.fromCharCode(e)).join("");return btoa(t)}function i(e){if(!e||"object"!=typeof e)return!0;for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function c(e){if("Object"===o(e)){if(e["@type"]&&"binary"===e["@type"])return function(e){if("function"!=typeof atob)return new ArrayBuffer(0);const t=atob(e),n=new Uint8Array(t.length);return Array.prototype.forEach.call(t,(e,t)=>{n[t]=e.charCodeAt(0)}),n.buffer}(e.base64||"");const t={};for(const n in e)t[n]=c(e[n]);return t}return"Array"===o(e)?e.map(c):e}function a(e,t,n){return`${t}@${n}#${e}`}class d{constructor(e){this.instanceId=String(e),this.lastCallbackId=0,this.callbacks={},this.hooks={}}add(e){return this.lastCallbackId++,this.callbacks[this.lastCallbackId]=e,this.lastCallbackId}remove(e){const t=this.callbacks[e];return delete this.callbacks[e],t}registerHook(e,t,n,r){const o=a(e,t,n);this.hooks[o]&&console.warn(`[JS Framework] Override an existing component hook "${o}".`),this.hooks[o]=r}triggerHook(e,t,n,r={}){const o=a(e,t,n),s=this.hooks[o];if("function"!=typeof s)return console.error(`[JS Framework] Invalid hook function type (${typeof s}) on "${o}".`),null;let i=null;try{i=s.apply(null,r.args||[])}catch(e){console.error(`[JS Framework] Failed to execute the hook function on "${o}".`)}return i}consume(e,t,n){const r=this.callbacks[e];return void 0!==n&&!1!==n||delete this.callbacks[e],"function"==typeof r?r(c(t)):new Error(`invalid callback id "${e}"`)}close(){this.callbacks={},this.hooks={}}}const l={};function u(e){return l[e]}function h(e){const t=l[e];return t&&t.taskCenter?t.taskCenter:null}function f(e,t,n){const{documentElement:r}=e;if(r.pureChildren.length>0||t.parentNode)return;const o=r.children,s=o.indexOf(n);s<0?o.push(t):o.splice(s,0,t),1===t.nodeType?("body"===t.role?(t.docId=e.id,t.ownerDocument=e,t.parentNode=r,m(t,r)):(t.children.forEach(e=>{e.parentNode=t}),p(e,t),t.docId=e.id,t.ownerDocument=e,m(t,r),delete e.nodeMap[t.nodeId]),r.pureChildren.push(t),function(e,t){const n=t.toJSON();e&&e.taskCenter&&"function"==typeof e.taskCenter.send&&e.taskCenter.send("dom",{action:"createBody"},[n])}(e,t)):(t.parentNode=r,e.nodeMap[t.ref]=t)}function p(e,t){t.role="body",t.depth=1,delete e.nodeMap[t.nodeId],t.ref="_root",e.nodeMap._root=t,e.body=t}function m(e,t){e.parentNode=t,t.docId&&(e.docId=t.docId,e.ownerDocument=t.ownerDocument,e.ownerDocument.nodeMap[e.nodeId]=e,e.depth=t.depth+1),e.children.forEach(t=>{m(t,e)})}function y(e){for(;e;){if(1===e.nodeType)return e;e=e.nextSibling}}function g(e){for(;e;){if(1===e.nodeType)return e;e=e.previousSibling}}function v(e,t,n,r){n<0&&(n=0);const o=t[n-1],s=t[n];return t.splice(n,0,e),r&&(o&&(o.nextSibling=e),e.previousSibling=o,e.nextSibling=s,s&&(s.previousSibling=e)),n}function b(e,t,n,r){const o=t.indexOf(e);if(o<0)return-1;if(r){const e=t[o-1],n=t[o+1];e&&(e.nextSibling=n),n&&(n.previousSibling=e)}t.splice(o,1);let s=n;o<=n&&(s=n-1);const i=t[s-1],c=t[s];return t.splice(s,0,e),r&&(i&&(i.nextSibling=e),e.previousSibling=i,e.nextSibling=c,c&&(c.previousSibling=e)),o===s?-1:n}function S(e,t,n){const r=t.indexOf(e);if(!(r<0)){if(n){const e=t[r-1],n=t[r+1];e&&(e.nextSibling=n),n&&(n.previousSibling=e)}t.splice(r,1)}}class w{constructor(){this.nodeId=r(),this.ref=this.nodeId,this.children=[],this.pureChildren=[],this.parentNode=null,this.nextSibling=null,this.previousSibling=null}destroy(){const e=u(this.docId);e&&(delete this.docId,delete e.nodeMap[this.nodeId]),this.children.forEach(e=>{e.destroy()})}}let k;const E={};const C="div",I=["click","longpress","touchstart","touchmove","touchend","panstart","panmove","panend","horizontalpan","verticalpan","swipe"];function O(e,t){u(e).nodeMap[t.nodeId]=t}class x extends w{constructor(e=C,t,n){super();const o=(s=e,E[s]);var s;if(o&&!n)return new o(e,t,!0);t=t||{},this.nodeType=1,this.nodeId=r(),this.ref=this.nodeId,this.type=e,this.attr=t.attr||{},this.style=t.style||{},this.classStyle=t.classStyle||{},this.classList=t.classList||[],this.event={},this.children=[],this.pureChildren=[]}appendChild(e){if(!e.parentNode||e.parentNode===this)if(e.parentNode){if(b(e,this.children,this.children.length,!0),1===e.nodeType){const t=b(e,this.pureChildren,this.pureChildren.length),n=h(this.docId);if(n&&t>=0)return n.send("dom",{action:"moveElement"},[e.ref,this.ref,t])}}else if(m(e,this),v(e,this.children,this.children.length,!0),this.docId&&O(this.docId,e),1===e.nodeType){v(e,this.pureChildren,this.pureChildren.length);const t=h(this.docId);if(t)return t.send("dom",{action:"addElement"},[this.ref,e.toJSON(),-1])}}insertBefore(e,t){if(!(e.parentNode&&e.parentNode!==this||e===t||e.nextSibling&&e.nextSibling===t))if(e.parentNode){if(b(e,this.children,this.children.indexOf(t),!0),1===e.nodeType){const n=y(t),r=b(e,this.pureChildren,n?this.pureChildren.indexOf(n):this.pureChildren.length),o=h(this.docId);if(o&&r>=0)return o.send("dom",{action:"moveElement"},[e.ref,this.ref,r])}}else if(m(e,this),v(e,this.children,this.children.indexOf(t),!0),this.docId&&O(this.docId,e),1===e.nodeType){const n=y(t),r=v(e,this.pureChildren,n?this.pureChildren.indexOf(n):this.pureChildren.length),o=h(this.docId);if(o)return o.send("dom",{action:"addElement"},[this.ref,e.toJSON(),r])}}insertAfter(e,t){if(!(e.parentNode&&e.parentNode!==this||e===t||e.previousSibling&&e.previousSibling===t))if(e.parentNode){if(b(e,this.children,this.children.indexOf(t)+1,!0),1===e.nodeType){const n=b(e,this.pureChildren,this.pureChildren.indexOf(g(t))+1),r=h(this.docId);if(r&&n>=0)return r.send("dom",{action:"moveElement"},[e.ref,this.ref,n])}}else if(m(e,this),v(e,this.children,this.children.indexOf(t)+1,!0),this.docId&&O(this.docId,e),1===e.nodeType){const n=v(e,this.pureChildren,this.pureChildren.indexOf(g(t))+1),r=h(this.docId);if(r)return r.send("dom",{action:"addElement"},[this.ref,e.toJSON(),n])}}removeChild(e,t){if(e.parentNode&&(S(e,this.children,!0),1===e.nodeType)){S(e,this.pureChildren);const t=h(this.docId);t&&t.send("dom",{action:"removeElement"},[e.ref])}t||e.destroy()}clear(){const e=h(this.docId);e&&this.pureChildren.forEach(t=>{e.send("dom",{action:"removeElement"},[t.ref])}),this.children.forEach(e=>{e.destroy()}),this.children.length=0,this.pureChildren.length=0}setAttr(e,t,n){if(this.attr[e]===t&&!1!==n)return;this.attr[e]=t;const r=h(this.docId);if(!n&&r){const n={};n[e]=t,r.send("dom",{action:"updateAttrs"},[this.ref,n])}}setAttrs(e,t){if(i(e))return;const n={};for(const r in e)this.attr[r]!==e[r]&&(this.attr[r]=e[r],n[r]=e[r]);if(!i(n)){const e=h(this.docId);!t&&e&&e.send("dom",{action:"updateAttrs"},[this.ref,n])}}setStyle(e,t,n){if(this.style[e]===t&&!1!==n)return;this.style[e]=t;const r=h(this.docId);if(!n&&r){const n={};n[e]=t,r.send("dom",{action:"updateStyle"},[this.ref,n])}}setStyles(e,t){if(i(e))return;const n={};for(const r in e)this.style[r]!==e[r]&&(this.style[r]=e[r],n[r]=e[r]);if(!i(n)){const e=h(this.docId);!t&&e&&e.send("dom",{action:"updateStyle"},[this.ref,n])}}setClassStyle(e){for(const n in this.classStyle)this.classStyle[n]="";Object.assign(this.classStyle,e);const t=h(this.docId);t&&t.send("dom",{action:"updateStyle"},[this.ref,this.toStyle()])}addEvent(e,t,n){if(this.event||(this.event={}),!this.event[e]){this.event[e]={handler:t,params:n};const r=h(this.docId);r&&r.send("dom",{action:"addEvent"},[this.ref,e])}}removeEvent(e){if(this.event&&this.event[e]){delete this.event[e];const t=h(this.docId);t&&t.send("dom",{action:"removeEvent"},[this.ref,e])}}fireEvent(e,t,n,r){let o=null,s=!1;const i=this.event[e];if(i&&t){const e=i.handler;t.stopPropagation=(()=>{s=!0}),o=r&&r.params?e.call(this,...r.params,t):e.call(this,t)}return!s&&n&&-1!==I.indexOf(e)&&this.parentNode&&this.parentNode.fireEvent&&(t.currentTarget=this.parentNode,this.parentNode.fireEvent(e,t,n)),o}toStyle(){return Object.assign({},this.classStyle,this.style)}toJSON(){const e={ref:this.ref.toString(),type:this.type};i(this.attr)||(e.attr=this.attr),this.classList.length>0&&(e.classList=this.classList.slice());const t=this.toStyle();i(t)||(e.style=t);const n=[];for(const r in this.event){const{params:e}=this.event[r];e?n.push({type:r,params:e}):n.push(r)}return n.length&&(e.event=n),this.pureChildren.length&&(e.children=this.pureChildren.map(e=>e.toJSON())),e}toString(){return"<"+this.type+" attr="+JSON.stringify(this.attr)+" style="+JSON.stringify(this.toStyle())+">"+this.pureChildren.map(e=>e.toString()).join("")+"</"+this.type+">"}}k=x;let A=function(){};class j{constructor(e,t){Object.defineProperty(this,"instanceId",{enumerable:!0,value:String(e)}),Object.defineProperty(this,"callbackManager",{enumerable:!0,value:new d(e)}),A=t||function(){}}callback(e,t,n){return this.callbackManager.consume(e,t,n)}registerHook(...e){return this.callbackManager.registerHook(...e)}triggerHook(...e){return this.callbackManager.triggerHook(...e)}updateData(e,t,n){this.send("module",{module:"dom",method:"updateComponentData"},[e,t,n])}destroyCallback(){return this.callbackManager.close()}normalize(e){const t=o(e);return e&&e instanceof x?e.ref:e&&e._isVue&&e.$el instanceof x?e.$el.ref:"Function"===t?this.callbackManager.add(e).toString():function(e){const t=o(e);switch(t){case"Undefined":case"Null":return"";case"RegExp":return e.toString();case"Date":return e.toISOString();case"Number":case"String":case"Boolean":case"Array":case"Object":return e;case"ArrayBuffer":return{"@type":"binary",dataType:t,base64:s(e)};case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":return{"@type":"binary",dataType:t,base64:s(e.buffer)};default:return JSON.stringify(e)}}(e)}send(e,t,n,r){const{action:o,component:s,ref:i,module:c,method:a}=t;switch(n=n.map(e=>this.normalize(e)),e){case"dom":return this[o](this.instanceId,n);case"component":return this.componentHandler(this.instanceId,i,a,n,Object.assign({component:s},r));default:return this.moduleHandler(this.instanceId,c,a,n,r)}}callDOM(e,t){return this[e](this.instanceId,t)}callComponent(e,t,n,r){return this.componentHandler(this.instanceId,e,t,n,r)}callModule(e,t,n,r){return this.moduleHandler(this.instanceId,e,t,n,r)}}function F(e,t){const n=u(e);return n?Array.isArray(t)?t.map(e=>{switch(e.method){case"callback":return function(e,t,n,r){return e.taskCenter.callback(t,n,r)}(n,...e.args);case"fireEventSync":case"fireEvent":return function(e,t,n,r,o,s){const i=e.getRef(t);return i?e.fireEvent(i,n,r,o,s):new Error(`invalid element reference "${t}"`)}(n,...e.args);case"componentHook":return function(e,t,n,r,o){if(!e||!e.taskCenter)return console.error('[JS Framework] Can\'t find "document" or "taskCenter".'),null;let s=null;try{s=e.taskCenter.triggerHook(t,n,r,o)}catch(e){console.error(`[JS Framework] Failed to trigger the "${n}@${r}" hook on ${t}.`)}return s}(n,...e.args)}}):void 0:new Error("[JS Framework] Failed to receiveTasks, "+`instance (${e}) is not available.`)}const N={};function _(e){for(const t in e)N[t]||(N[t]={}),e[t].forEach(e=>{"string"==typeof e?N[t][e]=!0:N[t][e.name]=e.args})}function J(e,t){return"string"==typeof t?!(!N[e]||!N[e][t]):!!N[e]}const $={};function M(e){Array.isArray(e)&&e.forEach(e=>{e&&("string"==typeof e?$[e]=!0:"object"==typeof e&&"string"==typeof e.type&&($[e.type]=e,function(e,t){if(t&&t.length){class n extends k{}t.forEach(t=>{n.prototype[t]=function(...n){const r=h(this.docId);if(r)return r.send("component",{ref:this.ref,component:e,method:t},n)}}),E[e]=n}}(e.type,e.methods)))})}function T(e){return!!$[e]}const D=[];function P(e,t){B(e)?console.warn(`Service "${e}" has been registered already!`):(t=Object.assign({},t),D.push({name:e,options:t}))}function R(e){D.some((t,n)=>{if(t.name===e)return D.splice(n,1),!0})}function B(e){return t=e,D.map(e=>e.name).indexOf(t)>=0;var t}class U extends w{constructor(e){super(),this.nodeType=8,this.nodeId=r(),this.ref=this.nodeId,this.type="comment",this.value=e,this.children=[],this.pureChildren=[]}toString(){return"\x3c!-- "+this.value+" --\x3e"}}function z(e,t=[]){return{module:"dom",method:e,args:t}}class L{constructor(e,t){this.id=e,this.batched=!1,this.updates=[],"function"==typeof t?Object.defineProperty(this,"handler",{configurable:!0,enumerable:!0,writable:!0,value:t}):console.error("[JS Runtime] invalid parameter, handler must be a function")}createFinish(e){const t=this.handler;return t([z("createFinish")],e)}updateFinish(e){const t=this.handler;return t([z("updateFinish")],e)}refreshFinish(e){const t=this.handler;return t([z("refreshFinish")],e)}createBody(e){const t=e.toJSON(),n=t.children;delete t.children;const r=[z("createBody",[t])];return n&&r.push.apply(r,n.map(e=>z("addElement",[t.ref,e,-1]))),this.addActions(r)}addElement(e,t,n){return n>=0||(n=-1),this.addActions(z("addElement",[t,e.toJSON(),n]))}removeElement(e){if(Array.isArray(e)){const t=e.map(e=>z("removeElement",[e]));return this.addActions(t)}return this.addActions(z("removeElement",[e]))}moveElement(e,t,n){return this.addActions(z("moveElement",[e,t,n]))}setAttr(e,t,n){const r={};return r[t]=n,this.addActions(z("updateAttrs",[e,r]))}setStyle(e,t,n){const r={};return r[t]=n,this.addActions(z("updateStyle",[e,r]))}setStyles(e,t){return this.addActions(z("updateStyle",[e,t]))}addEvent(e,t){return this.addActions(z("addEvent",[e,t]))}removeEvent(e,t){return this.addActions(z("removeEvent",[e,t]))}handler(e,t){return t&&t()}addActions(e){const t=this.updates,n=this.handler;if(Array.isArray(e)||(e=[e]),!this.batched)return n(e);t.push.apply(t,e)}}const H={createBody:"callCreateBody",addElement:"callAddElement",removeElement:"callRemoveElement",moveElement:"callMoveElement",updateAttrs:"callUpdateAttrs",updateStyle:"callUpdateStyle",addEvent:"callAddEvent",removeEvent:"callRemoveEvent"};function W(t,n,r){const{module:o,method:s,args:i}=n;if(c=s,"dom"===o&&H[c]&&"function"==typeof e[H[c]])return e[H[s]](t,...i,"-1");var c;return r(t,[n],"-1")}class V{constructor(t,n,r){t=t?t.toString():"",this.id=t,this.URL=n,s=this,(o=t)&&(l[o]=s);var o,s;this.nodeMap={};const i=V.Listener||L;this.listener=new i(t,r||function(t,n){const r=n||e.callNative;return"function"!=typeof r&&console.error("[JS Runtime] no default handler"),function(e){Array.isArray(e)||(e=[e]);for(let n=0;n<e.length;n++){const o=W(t,e[n],r);if(-1===o)return o}}}(t,V.handler)),this.taskCenter=new j(t,r?(e,...t)=>r(...t):V.handler),this.createDocumentElement()}getRef(e){return this.nodeMap[e]}open(){this.listener.batched=!1}close(){this.listener.batched=!0}createDocumentElement(){if(!this.documentElement){const e=new x("document");e.docId=this.id,e.ownerDocument=this,e.role="documentElement",e.depth=0,e.ref="_documentElement",this.nodeMap._documentElement=e,this.documentElement=e,Object.defineProperty(e,"appendChild",{configurable:!0,enumerable:!0,writable:!0,value:e=>{f(this,e)}}),Object.defineProperty(e,"insertBefore",{configurable:!0,enumerable:!0,writable:!0,value:(e,t)=>{f(this,e,t)}})}return this.documentElement}createBody(e,t){if(!this.body){p(this,new x(e,t))}return this.body}createElement(e,t){return new x(e,t)}createComment(e){return new U(e)}fireEvent(e,t,n,r,o){if(!e)return;(n=n||{}).type=n.type||t,n.target=e,n.currentTarget=e,n.timestamp=Date.now(),r&&function(e,t){const n=t.attrs||{};for(const o in n)e.setAttr(o,n[o],!0);const r=t.style||{};for(const o in r)e.setStyle(o,r[o],!0)}(e,r);const s="true"===this.getRef("_root").attr.bubble;return e.fireEvent(t,n,s,o)}destroy(){this.taskCenter.destroyCallback(),delete this.listener,delete this.nodeMap,delete this.taskCenter,e=this.id,delete l[e];var e}}V.handler=null;const q={};function G(e,t,n){const r=h(e);return r&&"function"==typeof r.send?(...e)=>r.send("module",{module:t,method:n},e):(console.error(`[JS Framework] Failed to find taskCenter (${e}).`),null)}function K(e,t,n,r){const o=h(e);return o&&"function"==typeof o.send?"function"!=typeof r?(console.error(`[JS Framework] ${t}.${n} must be assigned as a function.`),null):e=>o.send("module",{module:t,method:n},[e]):(console.error(`[JS Framework] Failed to find taskCenter (${e}).`),null)}class X{constructor(e,t){n=this,r=String(e),Object.defineProperty(n,"[[CurrentInstanceId]]",{value:r});var n,r;this.config=t||{},this.document=new V(e,this.config.bundleUrl),this.requireModule=this.requireModule.bind(this),this.isRegisteredModule=J,this.isRegisteredComponent=T}requireModule(e){const t=(n=this,n["[[CurrentInstanceId]]"]);var n;if(!(t&&this.document&&this.document.taskCenter))return void console.error(`[JS Framework] Failed to requireModule("${e}"), `+`instance (${t}) doesn't exist anymore.`);if(!J(e))return void console.warn(`[JS Framework] using unregistered weex module "${e}"`);const r=`${e}#${t}`;if(!q[r]){const n=(o=e,N[o]),s={};for(const r in n)Object.defineProperty(s,r,{enumerable:!0,configurable:!0,get:()=>G(t,e,r),set:n=>K(t,e,r,n)});"function"==typeof Proxy?q[r]=new Proxy(s,{get:(n,r)=>r in n?n[r]:(console.warn(`[JS Framework] using unregistered method "${e}.${r}"`),G(t,e,r))}):q[r]=s}var o;return q[r]}supports(e){if("string"!=typeof e)return null;const t=e.match(/^@(\w+)\/(\w+)(\.(\w+))?$/i);if(t){const e=t[1],n=t[2],r=t[4];switch(e){case"module":return J(n,r);case"component":return T(n)}}return null}}let Y,Q;const Z=/^\s*\/\/ *(\{[^}]*\}) *\r?\n/;const ee={};function te(e){return ee[e]}function ne(e,t={},n){const r=new X(e,t);Object.freeze(r);const o=t.bundleType||"Vue";ee[e]=o;const s=Q.frameworks[o];if(!s)return new Error(`[JS Framework] Invalid bundle type "${o}".`);!function(e,t,n){const r=h(e);if(!r||"function"!=typeof r.send)return void console.error("[JS Framework] Failed to create tracker!");if(!t||!n)return void console.warn(`[JS Framework] Invalid track type (${t}) or value (${n})`);const o=`jsfm.${t}.${n}`;try{if(J("userTrack","addPerfPoint")){const e=Object.create(null);e[o]="4",r.send("module",{module:"userTrack",method:"addPerfPoint"},[e])}}catch(e){console.error(`[JS Framework] Failed to trace "${o}"!`)}}(e,"bundleType",o);const i=function(e,t,n){const r=Object.create(null);return r.service=Object.create(null),D.forEach(({name:o,options:s})=>{const i=s.create;if(i)try{const s=i(e,t,n);Object.assign(r.service,s),Object.assign(r,s.instance)}catch(e){console.error(`[JS Runtime] Failed to create service ${o}.`)}}),delete r.service.instance,Object.freeze(r.service),r}(e,{weex:r,config:t,created:Date.now(),framework:o,bundleType:o},Q);Object.freeze(i);const c=Object.create(null);Object.assign(c,i,{weex:r,services:i}),Object.freeze(c);const a=Object.assign({},c);return"function"==typeof s.createInstanceContext&&Object.assign(a,s.createInstanceContext(e,c,n)),Object.freeze(a),a}const re={createInstance:function(t,n,r,o){if(ee[t])return new Error(`The instance id "${t}" has already been used!`);const s=function(e){const t=Z.exec(e);if(t)try{return JSON.parse(t[1]).framework}catch(e){}return"Weex"}(n);ee[t]=s,(r=JSON.parse(JSON.stringify(r||{}))).env=JSON.parse(JSON.stringify(e.WXEnvironment||{})),r.bundleType=s;const i=Q.frameworks[s];if(!i)return new Error(`[JS Framework] Invalid bundle type "${s}".`);"Weex"===s&&console.error('[JS Framework] COMPATIBILITY WARNING: Weex DSL 1.0 (.we) framework is no longer supported! It will be removed in the next version of WeexSDK, your page would be crash if you still using the ".we" framework. Please upgrade it to Vue.js or Rax.');const c=ne(t,r,o);if("function"==typeof i.createInstance){if("Rax"===s||"Weex"===s){const e=Object.assign({config:r,created:Date.now(),framework:s},c);return i.createInstance(t,n,r,o,e)}return i.createInstance(t,n,r,o,c)}!function(e,t){const n=[],r=[];for(const s in t)n.push(s),r.push(t[s]);const o=`\n    (function (global) {\n      ${e}\n    })(Object.create(this))\n  `;new Function(...n,o)(...r)}(n,c)},createInstanceContext:ne,getRoot:function(e){const t=u(e);try{if(t&&t.body)return t.body.toJSON()}catch(e){return void console.error("[JS Framework] Failed to get the virtual dom tree.")}},getDocument:u,registerService:P,unregisterService:R,callJS(e,t){const n=Y[te(e)];return n&&"function"==typeof n.receiveTasks?n.receiveTasks(e,t):F(e,t)}};function oe(e){re[e]=function(...t){const n=t[0],r=te(n);if(r&&Y[r]){const o=Y[r][e](...t),s={framework:r};return"refreshInstance"===e?D.forEach(e=>{const t=e.options.refresh;t&&t(n,{info:s,runtime:Q})}):"destroyInstance"===e&&(D.forEach(e=>{const t=e.options.destroy;t&&t(n,{info:s,runtime:Q})}),delete ee[n]),o}return new Error("[JS Framework] Using invalid instance id "+`"${n}" when calling ${e}.`)}}function se(e,t){re[e]=function(...n){"function"==typeof t&&t(...n);for(const t in Q.frameworks){const r=Q.frameworks[t];r&&r[e]&&r[e](...n)}}}const ie={Document:V,Element:x,Comment:U,Listener:L,TaskCenter:j,sendTasks:(...t)=>"function"==typeof callNative?callNative(...t):(e.callNative||(()=>{}))(...t)};V.handler=ie.sendTasks;var ce={service:{register:P,unregister:R,has:B},freezePrototype:function(){Object.freeze(ie.Comment),Object.freeze(ie.Listener),Object.freeze(ie.Document.prototype),Object.freeze(ie.Comment.prototype),Object.freeze(ie.Listener.prototype)},init:function(t){Y=(Q=t||{}).frameworks||{},function(){const t={createFinish:e.callCreateFinish,updateFinish:e.callUpdateFinish,refreshFinish:e.callRefreshFinish,createBody:e.callCreateBody,registerStyleSheets:e.callRegisterStyleSheets,addElement:e.callAddElement,removeElement:e.callRemoveElement,moveElement:e.callMoveElement,updateAttrs:e.callUpdateAttrs,updateStyle:e.callUpdateStyle,updateClassList:e.callUpdateClassList,addEvent:e.callAddEvent,removeEvent:e.callRemoveEvent},n=j.prototype;for(const e in t){const r=t[e];n[e]=r?(e,t)=>r(e,...t):(t,n)=>A(t,[{module:"dom",method:e,args:n}],"-1")}n.componentHandler=e.callNativeComponent||((e,t,n,r,o)=>A(e,[{component:o.component,ref:t,method:n,args:r}])),n.moduleHandler=e.callNativeModule||((e,t,n,r)=>A(e,[{module:t,method:n,args:r}]))}();for(const e in Y){const n=Y[e];if("function"==typeof n.init)try{n.init(t)}catch(e){}}return se("registerComponents",M),se("registerModules",_),se("registerMethods"),["destroyInstance","refreshInstance"].forEach(oe),re},config:ie};function ae(e,t={}){this.type=e||"message",this.data=t.data||null,this.origin=t.origin||"",this.source=t.source||null,this.ports=t.ports||[],this.target=null,this.timeStamp=Date.now()}const de={},le={};function ue(){}ue.prototype.postMessage=function(e){if(this._closed)throw new Error(`BroadcastChannel "${this.name}" is closed.`);const t=de[this.name];if(t&&t.length)for(let n=0;n<t.length;++n){const r=t[n];r._closed||r===this||"function"==typeof r.onmessage&&r.onmessage(new ae("message",{data:e}))}},ue.prototype.close=function(){if(!this._closed&&(this._closed=!0,de[this.name])){const e=de[this.name].filter(e=>e!==this);e.length?de[this.name]=e:delete de[this.name]}};var he={BroadcastChannel:{create:(t,n,r)=>{if(le[t]=[],"function"==typeof e.BroadcastChannel)return{};const o={BroadcastChannel:function(e){Object.defineProperty(this,"name",{configurable:!1,enumerable:!0,writable:!1,value:String(e)}),this._closed=!1,this.onmessage=null,de[this.name]||(de[this.name]=[]),de[this.name].push(this),le[t].push(this)}};return o.BroadcastChannel.prototype=ue.prototype,{instance:o}},destroy:(e,t)=>{le[e].forEach(e=>e.close()),delete le[e]}}};var fe,pe,me,ye=(fe=function(e){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getInstance=s,t.init=function(e){r=e.Document,e.Element,e.Comment},t.createInstanceContext=function(e,t,n){var s=o[e];if(void 0==s){var i=t.weex.document.URL||"about:blank",c=new r(e,i),a={};s=o[e]={document:c,instanceId:e,bundleUrl:i,__weex_data__:n,modules:a,uid:0};var d={instanceId:e,bundleUrl:i,document:c,__weex_document__:c,__weex_options__:t,__weex_data__:n,__weex_config__:t};return d}throw new Error('Instance id "'+e+'" existed when create instance')},t.refreshInstance=function(e,t){var n=s(e).document;n.documentElement.fireEvent("refresh",{timestamp:Date.now(),data:t}),n.taskCenter.send("dom",{action:"refreshFinish"},[])},t.destroyInstance=function(e){var t=s(e),n=(t.bundleCode,t.document);n.documentElement.fireEvent("destory",{timestamp:Date.now()}),n.destroy&&n.destroy();n.taskCenter&&n.taskCenter.destroyCallback&&n.taskCenter.destroyCallback();delete o[e]};var r=void 0,o={};function s(e){var t=o[e];if(!t)throw new Error('Invalid instance id "'+e+'"');return t}t.default=t}])},pe=void 0,fe(pe={exports:{}},pe.exports),pe.exports),ge=(me=ye,me&&me.__esModule&&Object.prototype.hasOwnProperty.call(me,"default")?me.default:me);!function(n){const{init:r,config:o}=ce;o.frameworks=n;const{native:s,transformer:i}=t;for(const e in he)ce.service.register(e,he[e]);ce.freezePrototype(),e.frameworkVersion=s,e.transformerVersion=i;const c=r(o);for(const t in c)e[t]=((...e)=>{const n=c[t](...e);return n instanceof Error&&console.error(n.toString()),n})}({Rax:Object.freeze({default:ge,__moduleExports:ye})})},"object"==typeof exports&&"undefined"!=typeof module?t():"function"==typeof define&&define.amd?define(t):t();var t;
//# sourceMappingURL=weex-rax.es6.min.js.map
